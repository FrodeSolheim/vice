#!/bin/sh
# This file is automatically generated by fs-package
set -e

# FIXME: tiff?
# FIXME: jpeg?
# FIXME: webp?

fsdeps/packages/libpng
fsdeps/packages/SDL2

PACKAGE=xa-2.3.13
URL=https://www.floodgap.com/retrotech/xa/dists/$PACKAGE.tar.gz
SHA256=a9477af150b6c8a91cd3d41e1cf8c9df552d383326495576830271ca4467bd86
REVISION=0

. fsdeps/dep.sh

python3 fsdeps/download.py $URL sha256:$SHA256

rm -Rf fsdeps/_build && mkdir fsdeps/_build && cd fsdeps/_build
tar xf ../_sources/$PACKAGE.tar.gz
cd $PACKAGE

if [ $SYSTEM_OS = "Windows" ]; then
make mingw
mkdir -p $PREFIX/bin
cp xa.exe $PREFIX/bin/
else
make
make install DESTDIR=$PREFIX
fi

touch $INSTALLED
